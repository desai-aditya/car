<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>14642 Lab3: kernel/src/syscall.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">14642 Lab3
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_3dd30a497388ee684638f120a124721c.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">syscall.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>base syscall implementations for Lab 4 tasks  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="syscall_8h_source.html">syscall.h</a>&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;<a class="el" href="rtt_8h_source.html">rtt.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="printk_8h_source.html">printk.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="arm_8h_source.html">arm.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for syscall.c:</div>
<div class="dyncontent">
<div class="center"><img src="syscall_8c__incl.png" border="0" usemap="#kernel_2src_2syscall_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7f5ec70f8f9ae7913a4a99473bd347c0"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall_8c.html#a7f5ec70f8f9ae7913a4a99473bd347c0">sys_sbrk</a> (int incr)</td></tr>
<tr class="memdesc:a7f5ec70f8f9ae7913a4a99473bd347c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is the syscall implementation of sysbrk. This is used to expand the heap memory of the system to allocate more space that the user demands.  <a href="syscall_8c.html#a7f5ec70f8f9ae7913a4a99473bd347c0">More...</a><br /></td></tr>
<tr class="separator:a7f5ec70f8f9ae7913a4a99473bd347c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1580a2b60d1de6953680eb981f43f30"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall_8c.html#af1580a2b60d1de6953680eb981f43f30">sys_read</a> (int file, char *ptr, int len)</td></tr>
<tr class="memdesc:af1580a2b60d1de6953680eb981f43f30"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is the syscall implementation of the read function. This returns the number of bytes it read from the console. This uses rtt to read data from the console.  <a href="syscall_8c.html#af1580a2b60d1de6953680eb981f43f30">More...</a><br /></td></tr>
<tr class="separator:af1580a2b60d1de6953680eb981f43f30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad47bc183d8d0ce684a447ed8fc4df22d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall_8c.html#ad47bc183d8d0ce684a447ed8fc4df22d">sys_write</a> (int file, char *ptr, int len)</td></tr>
<tr class="memdesc:ad47bc183d8d0ce684a447ed8fc4df22d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is the syscall implementation of the write function. This returns the number of bytes it wrote to the file or console. This uses rtt to write data into the file or console.  <a href="syscall_8c.html#ad47bc183d8d0ce684a447ed8fc4df22d">More...</a><br /></td></tr>
<tr class="separator:ad47bc183d8d0ce684a447ed8fc4df22d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c0b6529c2b4ef268480a55f1314a400"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="syscall_8c.html#a1c0b6529c2b4ef268480a55f1314a400">sys_exit</a> (int status)</td></tr>
<tr class="memdesc:a1c0b6529c2b4ef268480a55f1314a400"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the system call implementation of the function exit. It takes in the error code status of exit. If the error code is 0, it means the program returned successfully and hence no erros occurred. If there was a non-zero status code, then it sets the on-board led to red and exits printing a message about the error code. Later, it disables the interrupts and sleeps. It does not return to the program.  <a href="syscall_8c.html#a1c0b6529c2b4ef268480a55f1314a400">More...</a><br /></td></tr>
<tr class="separator:a1c0b6529c2b4ef268480a55f1314a400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb7f0c55a9a9402d6cfba6431bb4383"><td class="memItemLeft" align="right" valign="top"><a id="a1eb7f0c55a9a9402d6cfba6431bb4383"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sys_delay_ms</b> (uint32_t ms)</td></tr>
<tr class="separator:a1eb7f0c55a9a9402d6cfba6431bb4383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf76039fab88d97513fb815e1fbdf51"><td class="memItemLeft" align="right" valign="top"><a id="aebf76039fab88d97513fb815e1fbdf51"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>sys_lux_read</b> ()</td></tr>
<tr class="separator:aebf76039fab88d97513fb815e1fbdf51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e2819bc105dfadeb1d5f78ec266909b"><td class="memItemLeft" align="right" valign="top"><a id="a3e2819bc105dfadeb1d5f78ec266909b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sys_pix_set</b> (uint8_t red, uint8_t green, uint8_t blue)</td></tr>
<tr class="separator:a3e2819bc105dfadeb1d5f78ec266909b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9893f8fc852db8806555291af3419fc2"><td class="memItemLeft" align="right" valign="top"><a id="a9893f8fc852db8806555291af3419fc2"></a>
uint32_t *&#160;</td><td class="memItemRight" valign="bottom"><b>__heap_base</b></td></tr>
<tr class="separator:a9893f8fc852db8806555291af3419fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78792279a7f231b01508fcb59e3e6e7e"><td class="memItemLeft" align="right" valign="top"><a id="a78792279a7f231b01508fcb59e3e6e7e"></a>
uint32_t *&#160;</td><td class="memItemRight" valign="bottom"><b>__heap_limit</b></td></tr>
<tr class="separator:a78792279a7f231b01508fcb59e3e6e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a659139352b5605289fe8815b59746273"><td class="memItemLeft" align="right" valign="top"><a id="a659139352b5605289fe8815b59746273"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>offset_from_heap_base</b> = 0</td></tr>
<tr class="separator:a659139352b5605289fe8815b59746273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83207be81c5ca4a75d610d37f82c4615"><td class="memItemLeft" align="right" valign="top"><a id="a83207be81c5ca4a75d610d37f82c4615"></a>
uint32_t *&#160;</td><td class="memItemRight" valign="bottom"><b>program_brk</b></td></tr>
<tr class="separator:a83207be81c5ca4a75d610d37f82c4615"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>base syscall implementations for Lab 4 tasks </p>
<dl class="section note"><dt>Note</dt><dd>Not for public release, do not share</dd></dl>
<dl class="section date"><dt>Date</dt><dd>last modified 25 October 2022 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>CMU 14-642 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1c0b6529c2b4ef268480a55f1314a400"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c0b6529c2b4ef268480a55f1314a400">&#9670;&nbsp;</a></span>sys_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_exit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the system call implementation of the function exit. It takes in the error code status of exit. If the error code is 0, it means the program returned successfully and hence no erros occurred. If there was a non-zero status code, then it sets the on-board led to red and exits printing a message about the error code. Later, it disables the interrupts and sleeps. It does not return to the program. </p>
<p>@params[in] status - status code of the error message @params[out] non </p>

</div>
</div>
<a id="af1580a2b60d1de6953680eb981f43f30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1580a2b60d1de6953680eb981f43f30">&#9670;&nbsp;</a></span>sys_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_read </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is the syscall implementation of the read function. This returns the number of bytes it read from the console. This uses rtt to read data from the console. </p>
<p>@params[in] file - file descriptor from which data is read @params[in] ptr - pointer to the buffer into which data has to be read @params[in] - len is the number of bytes to be read</p>
<p>@params[out] returns the number of bytes it read from the input. Returns -1 on error </p>

</div>
</div>
<a id="a7f5ec70f8f9ae7913a4a99473bd347c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f5ec70f8f9ae7913a4a99473bd347c0">&#9670;&nbsp;</a></span>sys_sbrk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* sys_sbrk </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>incr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is the syscall implementation of sysbrk. This is used to expand the heap memory of the system to allocate more space that the user demands. </p>
<p>@params[in] size in bytes, represents the amount in bytes by which the heap should be eexpanded @params[out] none</p>
<dl class="section return"><dt>Returns</dt><dd>val void pointer to the location of the system break </dd></dl>

</div>
</div>
<a id="ad47bc183d8d0ce684a447ed8fc4df22d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad47bc183d8d0ce684a447ed8fc4df22d">&#9670;&nbsp;</a></span>sys_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_write </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is the syscall implementation of the write function. This returns the number of bytes it wrote to the file or console. This uses rtt to write data into the file or console. </p>
<p>@params[in] file - file descriptor to which data is written @params[in] ptr - pointer to the buffer into which data has to be written @params[in] - len is the number of bytes to be written</p>
<p>@params[out] returns the number of bytes it wrote to the output. Returns -1 on error </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
</div>
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>